<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Lab 1: Pollinators Dashboard</title>
  <script type="module">
    import * as Plot from "https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6/+esm";

    // Load CSV
    const pollinator = await (await fetch("./data/pollinator_activity_data.csv")).text();
    const rows = pollinator.split("\n").slice(1).map(r => {
      const [rowid, pollinator_species, avg_body_mass_g, avg_wing_span_mm, weather_condition, visit_count, flower_species, nectar_production] = r.split(",");
      return { rowid, pollinator_species, avg_body_mass_g: +avg_body_mass_g, avg_wing_span_mm: +avg_wing_span_mm, weather_condition, visit_count: +visit_count, flower_species, nectar_production: +nectar_production };
    });

    // Example Plot
    document.body.appendChild(
      Plot.plot({
        title: "Body Mass vs Wing Span by Pollinator Species",
        height: 250,
        x: { label: "Average Body Mass (g)" },
        y: { label: "Average Wing Span (mm)" },
        marks: [
          Plot.dot(rows, {
            x: "avg_body_mass_g",
            y: "avg_wing_span_mm",
            fill: "pollinator_species",
            r: 5
          })
        ]
      })
    );
  </script>
</head>
<body></body>
</html>
